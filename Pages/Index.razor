@using System.Globalization

<style>
  .greycliff {
    font-family: 'Greycliff CF', sans-serif;
  }
    body {
    margin: 0;
    background: #FAFBFF;
    color: #000000;
    padding-bottom: 80px;
  }

  .header-bar {
    background-color: #594AE2;
    padding: 1rem 2rem;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .logo {
    height: 30px;
  }

  .user-info {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .user-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
  }

  .resumen-box {
    background-color: white;
    border-radius: 24px;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
    padding: 1.5rem;
    margin-top: 0.5rem;
    margin-bottom: 1.25rem;
  }

.resumen-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  min-width: 0;
}

.resumen-icono {
  width: 40px;
  height: 40px;
  background: #ffffff;
  border-radius: 50%;
  padding: 6px;
  flex-shrink: 0;
}

.resumen-texto {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0;
  max-width: 100%;
  align-items: flex-start;
}

.resumen-texto span:first-child {
  font-size: 0.85rem;
}

.resumen-monto {
  font-weight: 700;
  font-size: 1.2rem;
  line-height: 1.2;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 100%;
}

/* 游녢 VERSI칍N M칍VIL */
@@media (max-width: 480px) {
  .resumen-item {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .resumen-icono {
    display: none;
  }

  .resumen-texto span:first-child {
    font-size: 0.75rem;
  }

  .resumen-monto {
    font-size: 1rem;
  }
}

.footer-menu {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  text-align: center;
  align-items: center;
  font-size: 0.5rem;
  gap: 0.25rem;
}

.footer-menu img {
  height: 28px;
  width: auto;
  margin-bottom: 4px;
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.footer-menu .registrar-icono {
  height: 32px;
  width: auto;  /* 游녣 mantiene aspecto natural */
  margin-bottom: 4px;
}

.footer-menu .registrar-texto {
  font-weight: 600;
  font-size: 0.5rem;
  margin-top: 4px;
}

</style>

<MudThemeProvider />
<MudDialogProvider />

<!-- 游댳 Header -->
<div class="header-bar greycliff">
  <img src="https://cadamenudo.github.io/UI-UX/assets/logo/cada-menudo-logo-white.png" alt="Logo" class="logo" />
  <div class="user-info">
    <span>Hola Xavier</span>
    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Avatar" class="user-avatar" />
  </div>
</div>

<!-- 游댳 Contenido -->
<MudContainer MaxWidth="MaxWidth.Large" Class="pa-4 greycliff">

  <!-- 游댲 Resumen -->
<MudPaper Class="resumen-box">
  <MudGrid GutterSize="3" Justify="Justify.SpaceBetween">
    @foreach (var item in Resumen)
    {
      <MudItem Xs="4" Style="min-width: 0;">
        <div class="resumen-item">
          <img src="@item.Icon" class="resumen-icono" />
          <div class="resumen-texto">
            <span>@item.Nombre</span>
            <span class="resumen-monto">@item.Valor</span>
          </div>
        </div>
      </MudItem>
    }
  </MudGrid>
</MudPaper>

  <!-- 游댳 Super치vit -->
<MudAlert Severity="Severity.Success" Dense="true" Class="my-2 mb-3">
    SUPER: Tienes un sobrante de <strong>$@Superavit</strong>
  </MudAlert>
  
  <!-- 游댲 Fechas -->
<MudGrid Class="my-3 mb-5"> <!-- Aumentado a mb-5 -->
    <MudItem Xs="6">
        <MudDatePicker Label="Desde"
                       @bind-Date="FechaDesde"
                       DateFormat="dd/MM/yyyy"
                       Culture="@culturaES"
                       AnchorOrigin="Origin.TopLeft"
                       TransformOrigin="Origin.TopLeft" />
    </MudItem>
    <MudItem Xs="6">
        <MudDatePicker Label="Hasta"
                       @bind-Date="FechaHasta"
                       DateFormat="dd/MM/yyyy"
                       Culture="@culturaES"
                       AnchorOrigin="Origin.TopRight"
                       TransformOrigin="Origin.TopRight" />
    </MudItem>

</MudGrid>

<!-- 游댳 Gr치fico 1: Meta del a침o -->
<MudPaper Class="pa-4 my-4" Style="border-radius:16px;">
  <MudText Typo="Typo.h6" Align="Align.Center">Meta para el a침o</MudText>
  <GraficoMetas />
</MudPaper>

<!-- 游댳 Gr치fico 2: Ingresos vs Gastos -->
<MudPaper Class="pa-4 my-4" Style="border-radius:16px;">
  <MudText Typo="Typo.h6" Align="Align.Center">Ingresos vs Gastos</MudText>
  <GraficoIngresosGastos />
</MudPaper>

<!-- 游댳 Gr치fico 3: Ingresos Totales -->
  <MudPaper Class="pa-4 my-4" Style="border-radius:16px;">
    <MudText Typo="Typo.h6" Align="Align.Center">Ingresos Totales</MudText>
 <GraficoIngresosTotales />
  </MudPaper>

<!-- 游댳 Gr치fico 4: Gastos Totales + Subcategor칤as -->
<MudPaper Class="pa-4 my-4" Style="border-radius:16px;">
  <MudText Typo="Typo.h6" Align="Align.Center">Gastos Totales</MudText>
  <GraficoGastosTotales />
</MudPaper>

</MudContainer>

<!-- 游댳 Legal -->
<div class="footer-legales greycliff" style="text-align: center; margin: 1rem 0;">
    <a href="https://cadamenudo.github.io/UI-UX/terminos.html" target="_blank" style="margin-right: 1rem;">T칄RMINOS</a>
    <a href="https://cadamenudo.github.io/UI-UX/privacidad.html" target="_blank" style="margin-right: 1rem;">PRIVACIDAD</a>
    <a href="mailto:tech@cadamenudo.com" style="font-weight: 500;">tech@cadamenudo.com</a>
</div>

<!-- 游댳 Footer -->
<footer class="navbar greycliff" style="background-color: #594AE2; padding: 0.75rem 0;">
  <div class="footer-menu">
    <div style="color: white;">
      <img src="https://cadamenudo.github.io/UI-UX/assets/icons/home.png" alt="Home" />
      <div>Tablero</div>
    </div>
    <div style="color: white;">
      <img src="https://cadamenudo.github.io/UI-UX/assets/icons/transacciones.png" alt="Transacciones" />
      <div>Transacciones</div>
    </div>
    <div style="color: white;">
      <img src="https://cadamenudo.github.io/UI-UX/assets/icons/nueva.png" alt="Registrar" class="registrar-icono" />
      <div class="registrar-texto">Registrar</div>
    </div>
    <div style="color: white;">
      <img src="https://cadamenudo.github.io/UI-UX/assets/icons/metas.png" alt="Metas" />
      <div>Metas</div>
    </div>
    <div style="color: white;">
      <img src="https://cadamenudo.github.io/UI-UX/assets/icons/buscar.png" alt="Buscar" />
      <div>Buscar</div>
    </div>
  </div>
</footer>

@code {
  private DateTime? FechaDesde = new DateTime(2025, 1, 1);
  private DateTime? FechaHasta = new DateTime(2025, 5, 31);
  private string Superavit = "1,868.77";

  private CultureInfo culturaES = new("es-ES");

  private List<(string Nombre, string Valor, string Icon)> Resumen = new()
  {
    ("Ingresos", "$6,000.00", "https://cadamenudo.github.io/UI-UX/assets/icons/ingreso.png"),
    ("Gastos", "$3,531.23", "https://cadamenudo.github.io/UI-UX/assets/icons/gastos.png"),
    ("Ahorros", "$600.00", "https://cadamenudo.github.io/UI-UX/assets/icons/ahorro.png")
  };
}
